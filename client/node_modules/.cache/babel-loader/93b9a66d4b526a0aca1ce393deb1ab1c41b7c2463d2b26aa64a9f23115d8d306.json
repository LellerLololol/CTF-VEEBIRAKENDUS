{"ast":null,"code":"import'../App.css';import{Profiler,useEffect,useState}from'react';import{useNavigate}from'react-router-dom';// To redirect if the user is not authenticated\nimport Header from'../components/header';import LogIn from'../components/logIn';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const[userData,setUserData]=useState(null);// State to store profile data\nconst[loading,setLoading]=useState(true);// To handle loading state\nconst[error,setError]=useState(\"\");// To handle any errors\nconst navigate=useNavigate();// For redirecting the user\nuseEffect(()=>{const token=localStorage.getItem('jwtToken');// Get the JWT token from localStorage\nif(!token){navigate('/login');// Redirect to login page if there's no token\nreturn;}// Fetch user data from the backend\nconst fetchUserData=async()=>{try{const response=await fetch('/api/Profile',{headers:{// ! wtf?\n'token':\"Bearer \".concat(token),// Include the JWT token in the Authorization header\n'Content-Type':'application/json'}});if(response.ok){const data=await response.json();setUserData(data);// Set the received data to userData state // ! wtf?\n}else{setError(\"Failed to load user data.\");}}catch(err){setError(\"An error occurred while fetching user data.\");}finally{setLoading(false);// End loading state\n}};fetchUserData();// Call the function to fetch user data\n},[navigate]);// Handle the loading and error states\nif(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});// Show loading message while fetching data\n}if(error){return/*#__PURE__*/_jsx(\"div\",{children:error});// Show error message if something goes wrong\n}// If no token exists, render the login form\nif(!userData){return/*#__PURE__*/_jsxs(\"div\",{className:\"Profile\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(LogIn,{})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"Profile\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome, \",userData.username,\"!\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"User id:\"}),\" \",userData.id]})]})]});}export default Profile;","map":{"version":3,"names":["Profiler","useEffect","useState","useNavigate","Header","LogIn","jsx","_jsx","jsxs","_jsxs","Profile","userData","setUserData","loading","setLoading","error","setError","navigate","token","localStorage","getItem","fetchUserData","response","fetch","headers","concat","ok","data","json","err","children","className","username","id"],"sources":["C:/Users/Mike/Code/CTF-VEEBIRAKENDUS/client/src/pages/Profile.js"],"sourcesContent":["import '../App.css';\r\nimport { Profiler, useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom';  // To redirect if the user is not authenticated\r\nimport Header from '../components/header';\r\nimport LogIn from '../components/logIn';\r\n\r\nfunction Profile() {\r\n\r\n\tconst [userData, setUserData] = useState(null);  // State to store profile data\r\n\tconst [loading, setLoading] = useState(true);    // To handle loading state\r\n\tconst [error, setError] = useState(\"\");          // To handle any errors\r\n\tconst navigate = useNavigate();                  // For redirecting the user\r\n\r\n\t\r\n\r\n\tuseEffect(() => {\r\n\t\tconst token = localStorage.getItem('jwtToken');  // Get the JWT token from localStorage\r\n\t\t\r\n\t\tif (!token) {\r\n\t\tnavigate('/login');  // Redirect to login page if there's no token\r\n\t\treturn;\r\n\t\t}\r\n\r\n\t    // Fetch user data from the backend\r\n\t\tconst fetchUserData = async () => {\r\n\t\t\ttry {\r\n\t\t\t  const response = await fetch('/api/Profile', {\r\n\t\t\t\theaders: { // ! wtf?\r\n\t\t\t\t  'token': `Bearer ${token}`,  // Include the JWT token in the Authorization header\r\n\t\t\t\t  'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t  });\r\n\t  \r\n\t\t\t  if (response.ok) {\r\n\t\t\t\tconst data = await response.json();\r\n\t\t\t\tsetUserData(data);  // Set the received data to userData state // ! wtf?\r\n\t\t\t  } else {\r\n\t\t\t\tsetError(\"Failed to load user data.\");\r\n\t\t\t  }\r\n\t\t\t} catch (err) {\r\n\t\t\t  setError(\"An error occurred while fetching user data.\");\r\n\t\t\t} finally {\r\n\t\t\t  setLoading(false);  // End loading state\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tfetchUserData();  // Call the function to fetch user data\r\n\t}, [navigate]);\r\n\r\n\r\n\t// Handle the loading and error states\r\n\tif (loading) {\r\n\t\treturn <div>Loading...</div>;  // Show loading message while fetching data\r\n\t\t}\r\n\tif (error) {\r\n\t\treturn <div>{error}</div>;  // Show error message if something goes wrong\r\n\t}\r\n\r\n\t// If no token exists, render the login form\r\n\tif (!userData) {\r\n\t\treturn (\r\n\t\t\t<div className=\"Profile\">\r\n\t\t\t\t<Header />\r\n\t\t\t\t<LogIn />\r\n\t\t  \t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"Profile\">\r\n\t\t\t<Header />\r\n\t\t\t<div className=\"profile-container\">\r\n\t\t\t\t<h1>Welcome, {userData.username}!</h1>\r\n\t\t\t\t<p><strong>User id:</strong> {userData.id}</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"AAAA,MAAO,YAAY,CACnB,OAASA,QAAQ,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACrD,OAASC,WAAW,KAAQ,kBAAkB,CAAG;AACjD,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,KAAK,KAAM,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,QAAS,CAAAC,OAAOA,CAAA,CAAG,CAElB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAAG;AACjD,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAAK;AACjD,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAAW;AACjD,KAAM,CAAAe,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAAmB;AAIjDF,SAAS,CAAC,IAAM,CACf,KAAM,CAAAiB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAG;AAEjD,GAAI,CAACF,KAAK,CAAE,CACZD,QAAQ,CAAC,QAAQ,CAAC,CAAG;AACrB,OACA,CAEG;AACH,KAAM,CAAAI,aAAa,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,cAAc,CAAE,CAC9CC,OAAO,CAAE,CAAE;AACT,OAAO,WAAAC,MAAA,CAAYP,KAAK,CAAE,CAAG;AAC7B,cAAc,CAAE,kBAClB,CACC,CAAC,CAAC,CAEF,GAAII,QAAQ,CAACI,EAAE,CAAE,CAClB,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAClChB,WAAW,CAACe,IAAI,CAAC,CAAG;AACnB,CAAC,IAAM,CACRX,QAAQ,CAAC,2BAA2B,CAAC,CACpC,CACF,CAAE,MAAOa,GAAG,CAAE,CACZb,QAAQ,CAAC,6CAA6C,CAAC,CACzD,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CAAG;AACtB,CACD,CAAC,CAEDO,aAAa,CAAC,CAAC,CAAG;AACnB,CAAC,CAAE,CAACJ,QAAQ,CAAC,CAAC,CAGd;AACA,GAAIJ,OAAO,CAAE,CACZ,mBAAON,IAAA,QAAAuB,QAAA,CAAK,YAAU,CAAK,CAAC,CAAG;AAC/B,CACD,GAAIf,KAAK,CAAE,CACV,mBAAOR,IAAA,QAAAuB,QAAA,CAAMf,KAAK,CAAM,CAAC,CAAG;AAC7B,CAEA;AACA,GAAI,CAACJ,QAAQ,CAAE,CACd,mBACCF,KAAA,QAAKsB,SAAS,CAAC,SAAS,CAAAD,QAAA,eACvBvB,IAAA,CAACH,MAAM,GAAE,CAAC,cACVG,IAAA,CAACF,KAAK,GAAE,CAAC,EACH,CAAC,CAEV,CAEA,mBACCI,KAAA,QAAKsB,SAAS,CAAC,SAAS,CAAAD,QAAA,eACvBvB,IAAA,CAACH,MAAM,GAAE,CAAC,cACVK,KAAA,QAAKsB,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eACjCrB,KAAA,OAAAqB,QAAA,EAAI,WAAS,CAACnB,QAAQ,CAACqB,QAAQ,CAAC,GAAC,EAAI,CAAC,cACtCvB,KAAA,MAAAqB,QAAA,eAAGvB,IAAA,WAAAuB,QAAA,CAAQ,UAAQ,CAAQ,CAAC,IAAC,CAACnB,QAAQ,CAACsB,EAAE,EAAI,CAAC,EAC1C,CAAC,EACF,CAAC,CAER,CAEA,cAAe,CAAAvB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}