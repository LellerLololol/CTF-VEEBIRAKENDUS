{"ast":null,"code":"import React,{useState,useEffect}from'react';import'../App.css';import Header from'../components/header';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function getCookie(name){const value=\"; \".concat(document.cookie);const parts=value.split(\"; \".concat(name,\"=\"));if(parts.length===2)return parts.pop().split(';').shift();return null;}function Admin(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[loading,setLoading]=useState(true);useEffect(()=>{const checkToken=async()=>{const token=getCookie('token');if(token){try{const response=await fetch('/api/is_admin',{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});if(response.ok){setIsAuthenticated(true);}else{setIsAuthenticated(false);}}catch(error){console.error('Error validating token',error);setIsAuthenticated(false);}}else{setIsAuthenticated(false);}setLoading(false);};checkToken();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Checking for admin status...\"});}if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{children:\"Page denied. You are not admin\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"Admin\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Amazing\"})]});}export default Admin;","map":{"version":3,"names":["React","useState","useEffect","Header","jsx","_jsx","jsxs","_jsxs","getCookie","name","value","concat","document","cookie","parts","split","length","pop","shift","Admin","isAuthenticated","setIsAuthenticated","loading","setLoading","checkToken","token","response","fetch","method","headers","ok","error","console","children","className"],"sources":["C:/Users/mike/Code/CTF-VEEBIRAKENDUS/client/src/pages/admin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../App.css';\r\nimport Header from '../components/header';\r\n\r\nfunction getCookie(name) {\r\n  const value = `; ${document.cookie}`;\r\n  const parts = value.split(`; ${name}=`);\r\n  if (parts.length === 2) return parts.pop().split(';').shift();\r\n  return null;\r\n}\r\n\r\nfunction Admin() {\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n     useEffect(() => {\r\n    const checkToken = async () => {\r\n      const token = getCookie('token');\r\n      \r\n      if (token) {\r\n        try {\r\n          const response = await fetch('/api/is_admin', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`,\r\n              'Content-Type': 'application/json',\r\n            },\r\n          });\r\n\r\n          if (response.ok) {\r\n            setIsAuthenticated(true);\r\n          } else {\r\n            setIsAuthenticated(false);\r\n          }\r\n        } catch (error) {\r\n          console.error('Error validating token', error);\r\n          setIsAuthenticated(false);\r\n        }\r\n      } else {\r\n        setIsAuthenticated(false);\r\n      }\r\n      \r\n      setLoading(false);\r\n    };\r\n\r\n    checkToken();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return <div>Checking for admin status...</div>;\r\n    }\r\n\r\n    if (!isAuthenticated) {\r\n        return <div>Page denied. You are not admin</div>;\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"Admin\">\r\n            <Header />\r\n            <h1>Amazing</h1>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Admin;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,YAAY,CACnB,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1C,QAAS,CAAAC,SAASA,CAACC,IAAI,CAAE,CACvB,KAAM,CAAAC,KAAK,MAAAC,MAAA,CAAQC,QAAQ,CAACC,MAAM,CAAE,CACpC,KAAM,CAAAC,KAAK,CAAGJ,KAAK,CAACK,KAAK,MAAAJ,MAAA,CAAMF,IAAI,KAAG,CAAC,CACvC,GAAIK,KAAK,CAACE,MAAM,GAAK,CAAC,CAAE,MAAO,CAAAF,KAAK,CAACG,GAAG,CAAC,CAAC,CAACF,KAAK,CAAC,GAAG,CAAC,CAACG,KAAK,CAAC,CAAC,CAC7D,MAAO,KAAI,CACb,CAEA,QAAS,CAAAC,KAAKA,CAAA,CAAG,CACb,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACqB,OAAO,CAAEC,UAAU,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CAE3CC,SAAS,CAAC,IAAM,CACjB,KAAM,CAAAsB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,KAAM,CAAAC,KAAK,CAAGjB,SAAS,CAAC,OAAO,CAAC,CAEhC,GAAIiB,KAAK,CAAE,CACT,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,eAAe,CAAE,CAC5CC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,eAAe,WAAAlB,MAAA,CAAYc,KAAK,CAAE,CAClC,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF,GAAIC,QAAQ,CAACI,EAAE,CAAE,CACfT,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,IAAM,CACLA,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACF,CAAE,MAAOU,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CV,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACF,CAAC,IAAM,CACLA,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAEAE,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAEDC,UAAU,CAAC,CAAC,CACZ,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIF,OAAO,CAAE,CACT,mBAAOjB,IAAA,QAAA4B,QAAA,CAAK,8BAA4B,CAAK,CAAC,CAClD,CAEA,GAAI,CAACb,eAAe,CAAE,CAClB,mBAAOf,IAAA,QAAA4B,QAAA,CAAK,gCAA8B,CAAK,CAAC,CACpD,CAGA,mBACI1B,KAAA,QAAK2B,SAAS,CAAC,OAAO,CAAAD,QAAA,eAClB5B,IAAA,CAACF,MAAM,GAAE,CAAC,cACVE,IAAA,OAAA4B,QAAA,CAAI,SAAO,CAAI,CAAC,EACf,CAAC,CAEd,CAEA,cAAe,CAAAd,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}